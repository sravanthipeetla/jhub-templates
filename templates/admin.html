{% extends "templates/page.html" %}
{% block stylesheet %}
{{ super() }}
<style>
   @import url('https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;600&family=Poppins:wght@500&display=swap');
  .navbar-collapse {
    margin: 1vw;
  }

  .navbar-default {
    background-color: #ffffff;
    border: none;
  }

  .navbar-default .navbar-nav>li>a {
    color: #000000;
    font-family: Poppins;
    font-size: 16px;
    font-weight: 500;
  }

  .navbar-default .navbar-text {
    color: #000000;
  }

  #jupyterhub-logo {
    height: 3.5vh;
    margin: 1.6vw;
  }
 .stop-visible{
    display:none;
}
.admin-container {
    padding-left: 10vw;
    padding-right: 10vw;
    overflow: auto;
}

.admin-navbar {
    overflow: hidden;
    margin-left: -2.1vw;
}

/* Style the links inside the navigation bar */
.admin-navbar a {
    float: left;
    color: #000000;
    text-align: center;
    padding: 1vw 4vw;
    text-decoration: none;
    font-size: 1rem;
    border-bottom: 0.3vw solid #DBDBDB;
    overflow: auto;
    font-weight:500;
    font-family:'Poppins';
}

.admin-navbar a:hover {
    cursor: pointer;
}

.admin-navbar a.active {
    border-bottom: 0.3vw solid #006BB6;
    color: #006BB6;
}

.description-bar {
    border-bottom:2px solid #DBDBDB;
    display:flex;
    justify-content: space-between;
    /* padding-top: 1.5vw; */
    margin-top:3vh;
    padding-bottom: 1.5vh;
    margin-bottom: 1.5vh;
    align-items: center;

}

.description {
   
    font-family: 'Poppins';
    color:#4D4D4D;
    font-weight:500;
    font-size: 1rem;

}
#left-description-bar input,select{
    border-radius:50px;
    height:2.5rem;
    width:13.75rem;
    border:1px solid #5FBEF0;
    padding: 0rem 1rem;
    font-size: 1rem;
    font-weight: 0;
    color: black;
}
#left-description-bar input::placeholder {
    color: #ccc;
}

#left-description-bar {
    display: flex;
    gap: 1rem;
}


.add-btn {
    border:none;
    font-family: 'Poppins';
    background-color: #5FBEF0;
    border-radius: 1.5vw;
    color: white;
    font-weight: 500;
    font-size: 1rem;
    height:2.5rem;
    display: inline-block;
    padding: 0px 1rem;
    text-align: center;
    cursor: pointer;
} 
.courseDetails, .trainerDetails{
    display: flex;
    flex-wrap: wrap;
    
}

.courseCard,.trainerCard{
    display: flex;
    justify-content: space-between;
    background: linear-gradient(108.02deg, rgba(246, 251, 254, 0) 64.53%, #D6F0FF 122.73%), linear-gradient(179.46deg, rgba(246, 251, 254, 0) 1.56%, #DBF2FF 127.02%);
    border-radius: 10px;
    margin: 0.8rem 1%;
    width:23%;
}
.trainerCard-width{
    width: 18%;
}
.delete-icon{
    display: flex;
    flex-direction: column;
    justify-content: end;
    align-items: center;
    background: linear-gradient(180deg, rgba(254, 245, 245, 0.2) -6.12%, #FCEAE8 106.76%);
    border-radius: 0px 10px 10px 0px;
    padding: 0.5rem;
    cursor: pointer;
}
.eye-icon{
    display: flex;
    flex-direction: column;
    justify-content: end;
    align-items: center;
    background: linear-gradient(180deg, rgba(230, 244, 255, 0) -6.12%, #C2E6FF 106.76%);
    border-radius: 0px 10px 10px 0px;
    padding: 0.5rem;
    cursor: pointer;
}
.course-card-left,.trainer-card-left{
    padding:0.5rem;
    font-family: 'Gothic A1';
}
.course-title,.trainer-title{
    color:#006BB6;
    font-weight: 600;
    font-size: 1rem;
}
.learner-count-title{
    color:#999;
    font-weight: 400;
    font-size: 0.75rem;
}
.learner-count{
    font-weight: 500;
    font-size: 0.875rem;
}
.arrange-row{
    display: flex;
    justify-content: space-between;
}
.arrange-col{
    display: flex;
    flex-direction: column;
}

#learner-table {
    margin-bottom: 20px;
    background: #FFFFFF;
    /* border: 2px solid #5FBEF0; */
    border-collapse: inherit;
    border-spacing: 0px;
    border-radius: 14px 14px 0px 0px;
    table-layout: fixed;
    overflow: hidden;
    width: 100%;
    border: 1px solid #C6E7FB;
}

#learner-thead {

    background: #D2EDFB;;
    border-collapse: inherit;
    border-radius: 12px 12px 0px 0px;
   
}
tbody tr td:last-child{
    text-align: right;
    padding: 0.5rem 3rem;
}
tbody tr td:first-child{
    padding: 0.5rem 1.5rem; 
}
tr th:first-child{
    text-align: left;
}
tr th:last-child{
    text-align: right;
}
tbody tr:nth-child(even) {
    background-color:#FAFDFF;
  }
tbody tr:nth-child(odd) {
    background-color: #F1F9FE;;
  }

th{
    font-family: 'Poppins';
    font-style: normal;
    font-weight: 500;
    font-size: 1rem;
    color:#006BB6;
    padding: 0.5rem 1.5rem;
}

/* #admin-tbody {
    font-family: 'Gothic A1';
    font-size: 18px;
}

thead td:first-child {
    border-radius: 15px 0px 0px 0px;
} */

/* tbody td:first-child {
    color: #006BB6;
} 

td:last-child {
    border-radius: 0px 15px 0px 0px;
    text-align: left;
    padding: 5px 125px 5px 30px
}

td {
    padding: 5px 5px 5px 30px;
} 
 
</style>
{% endblock %}
{% block main %}
<div id="react-admin-hook">
  <script id="jupyterhub-admin-config">
    window.api_page_limit = parseInt("{{ api_page_limit|safe }}")
    window.base_url = "{{ base_url|safe }}"
  </script>
  <script src={{ static_url("js/admin.js") }}></script>
      <div class="admin-container">
        <div class="admin-navbar">
            <ul>
                <a class="course-nav active" id="course-nav">Courses</a>
                <a class="instructor-nav" id="instructor-nav">Trainers</a>
                <a class="learner-nav" id="learner-nav">Learners</a>
            </ul>
        </div>
        <div class="description-bar">
                <p class="description" id="description">You can manage Course details here.</p>
                <div id="left-description-bar" >
                    <input type="search" value="" placeholder="Search...">
                    <select  id="instructors_filter" class="stop-visible">
                        <option default  value="all">All</option>
                        <option value="mapped">Mapped</option>
                        <option value="unmapped">Unmapped</option>
                    </select>
                    <button class="add-btn" id="add-btn">Add Course</button>
                </div>
        </div>
        <div id="courseDetails">
            <div class="courseDetails" id="courseDetails">
                <div class="courseCard" id="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> 
                <div class="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> 
                <div class="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>  
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> 
                <div class="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> 
                <div class="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> 
                <div class="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">Data Scientist -Python and ML Basics</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">123</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count">Sidhartha Chinthapally</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div>    
            </div>
        </div>
        <div id="trainerDetails" class="stop-visible">
            <div class="trainerDetails">
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
                <div class="trainerCard trainerCard-width">
                    <div class="trainer-card-left">
                        <p class="trainer-title">Sidhartha Chinthapally</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Course count</span>
                                <span class="learner-count">12</span>
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Status</span>
                                <span class="learner-count">Mapped</span>
                            </div>
                        </div>  
                    </div>
                    <div class="eye-icon">
                        <img src="eye.png" alt="eye">
                    </div>
                </div>
            </div>
        </div>
        <div id="learnerDetails" class="stop-visible">
            <table id="learner-table">
                <tr id="learner-thead">
                    <th>Learners Name</th>
                    <th>Actions</th>
                </tr>
                <tbody>
                    <tr>
                        <td>Sravanthi Peetla</td>
                        <td><img src="eye.png" alt=""></td>
                    </tr>
                    <tr>
                        <td>Sravanthi Peetla</td>
                        <td><img src="eye.png" alt=""></td>
                    </tr>
                    <tr>
                        <td>Sravanthi Peetla</td>
                        <td><img src="eye.png" alt=""></td>
                    </tr>
                    <tr>
                        <td>Sravanthi Peetla</td>
                        <td><img src="eye.png" alt=""></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
  </div>
  {% endblock %}

  {% block footer %}
  {% endblock %}

  {% block script %}
  {{ super() }}
  <script type="text/javascript">
    // require(["admin"]);
    
    // custom script
    
    const hub_url = `/api/`;    
    const ngshare_url = `/services/ngshare/`;
    
    // To change the color for active link in top left navbar items
    const currentUrl = window.location.pathname.split("/");
    const currentAnchorTagText = currentUrl[currentUrl.length - 1];
    
    $('.navbar-nav a').each(function () {
      if ($(this).text().toLowerCase() == currentAnchorTagText) {
        $(this).css("color", "#006BB6");
      }
    });

    // To hide left navbar items - 'Token' and 'services'
    const navbar_left_list = document.getElementsByClassName("nav navbar-nav")[0].getElementsByTagName("li");
    navbar_left_list[1].style.visibility = 'hidden';
    navbar_left_list[3].style.visibility = 'hidden';

    let instructor = document.getElementById('instructor-nav');
let courses = document.getElementById('course-nav');
let learner = document.getElementById('learner-nav');
let addBtn = document.getElementById('add-btn');
let courseDetailsDiv = document.getElementById('courseDetails');
let description = document.getElementById('description');
let req = document.getElementById('req');
let courseCard = document.getElementById('courseCard');
let trainerDetails = document.getElementById('trainerDetails');
let instructorsFilter = document.getElementById('instructors_filter');
let learnerDetails = document.getElementById('learnerDetails');
courses.onclick = function() {
    instructorsFilter.classList.add('stop-visible');
    addBtn.textContent = "Add Course";
    description.textContent = "You can manage Course details here.";
    instructor.classList.remove('active');
    courses.classList.add('active');
    learner.classList.remove('active');
    courseDetails.classList.remove('stop-visible');
    trainerDetails.classList.add('stop-visible');
    learnerDetails.classList.add('stop-visible');
    const getCourseDetails = async (courses) => {
        const details = courses.map(async (courseName) => {
          const instructorsPromise = await fetch(`${ngshare_url}instructors/${courseName}`);
          const instructorsJson = await instructorsPromise.json();
          const instructorsCount = instructorsJson.instructors.length;
          const studentsPromise = await fetch(`${ngshare_url}students/${courseName}`);
          const studentsJson = await studentsPromise.json();
          const studentsCount = studentsJson.students.length;
          return { 'courseName': courseName, 'instructorsCount': instructorsCount, 'studentsCount': studentsCount };
        });
        return Promise.all(details);
      }
      let courseDetails = [];
      const courseFetch = await fetch(`${ngshare_url}courses`);
      const courseJson = await courseFetch.json();
      const coursesList = courseJson.courses;
      (async () => {
        courseDetails = await getCourseDetails(coursesList);
        if (courseDetails.length != 0) {
          courseDetails.map((detail) => {
            courseDetailsDiv.appendChild(`
   <div class="courseCard" id="courseCard">
                    <div class="course-card-left">
                        <p class="course-title">${detail.courseName}</p>
                        <div class="arrange-row">
                            <div class="arrange-col">
                                <span class="learner-count-title">Learner count</span>
                                <span class="learner-count">${detail.studentsCount}</span>
                                
                            </div>
                            <div class="arrange-col">
                                <span class="learner-count-title">Trainer name</span>
                                <span class="learner-count"></span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="delete-icon">
                        <img src="delete.png" alt="del">
                    </div>
                </div> `);
          });
        }
      })();
}
instructor.onclick = function() {
    instructorsFilter.classList.remove('stop-visible');
    addBtn.textContent = "Add Trainer";
    description.textContent = "You can manage Trainer details here.";
    instructor.classList.add('active');
    courses.classList.remove('active');
    learner.classList.remove('active');
    courseDetails.classList.add('stop-visible');
    trainerDetails.classList.remove('stop-visible');
    learnerDetails.classList.add('stop-visible');
}
learner.onclick = function() {
    instructorsFilter.classList.add('stop-visible');
    addBtn.textContent = "Add Learners";
    description.textContent = "You can manage Learner details here.";
    instructor.classList.remove('active');
    courses.classList.remove('active');
    learner.classList.add('active');
    courseDetails.classList.add('stop-visible');
    trainerDetails.classList.add('stop-visible');
    learnerDetails.classList.remove('stop-visible');
}
  </script>
  {% endblock %}
